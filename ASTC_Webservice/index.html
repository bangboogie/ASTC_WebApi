<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Product App</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
</head>
<body>


    <input id="txtEmail" type="email" class="box r30 r-62-52 inputField" placeholder="Email" autofocus="autofocus" />
    <input id="txtPassword" type="password" class="box r30 r-62-52 inputField" placeholder="Password" />
    <button id="btnLogin" type="button" class="box r50 r-62-52 r-hoverable btnAction">LOG IN</button>
    <span id="lblLoginError"></span>
    <hr />

    <script>

        // Test 1:
        var uri = "http://localhost:55825";

        $(document).ready(function () {

            //login
            function login(email, password) {
                //var email = $('#emailValue').val();
                //var password = $('#passwordValue').val();
                var body = { Email: email, Password: password};

                $.ajax({
                    url: uri + '/api/Customers/LoginCheck',
                    type: 'GET',
                    data: body,
                    dataType: 'json',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    success: function (result) {
                        console.log(result);             

                       
                      
                    },
                    error: function () {
                        

                        $("#lblLoginError").text("doesnt work");
                    }
                });


            }
            /////////////////////////////////////////////////////////
            //Login button
            $('#btnLogin').click(function () {
                var email = $('#txtEmail').val();
                var password = $('#txtPassword').val();
                clearLoginFields();
                if (!areLoginErrors()) {
                    login(email, password);
                }
            });
            ///////////////////////////////////////////////////////
            function areLoginErrors() {
                var emptyemail = false;
                var emptypassword = false;

                if ($('#txtEmail').val() === "")
                    emptyemail = true;
                if ($('#txtPassword').val() === "")
                    emptypassword = true;

                if (emptyemail !== false && emptypassword !== false) {
                    $("#lblLoginError").text("Email and password fields are empty.");
                    return true;
                }
                else {
                    if (emptyemail !== false) {
                        $("#lblLoginError").text("Email field is empty.");
                        return true;
                    }
                    else {
                        if (emptypassword !== false) {
                            $("#lblLoginError").text("Password field is empty.");
                            return true;
                        }
                        else {
                            // validation was successful
                            return false;
                        }
                    }

                }
            }
            //Clear fields login
            function clearLoginFields() {
                $("lblLoginError").text("");
                $('#emailLogin').val("");
                $('#passwordLogin').val("");
                console.log("Fields cleared");
            }
            ///////////////////////////////////////////////////////
        });




    </script>




</body>
</html> 